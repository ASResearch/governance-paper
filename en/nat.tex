
\section{Nebulas Autonomous Token (NAT) ​​issuing algorithm}

The issuance of NAT is based on each user's Nebulas Rank, voting behavior, and pledge amount.

\subsection{Overview}
The issuance of NAT is performed according to the weekly calculation cycle of Nebulas Rank (note: voting periods and Nebulas Rank calculations utilize the same weekly period). Based on these weekly cycles, the NAT airdrop is executed for each address on Nebulas looking at voting behavior, pledging and the previous week Nebulas Rank score.

Detailed explanation: 
For the period $i$, the new NAT $\mathcal{T}_i$ in the system is divided into three parts: the airdrop: $\mathcal{A}_i$, the voting incentive: $\mathcal{V}_i$, the pledge Incentive: $\mathcal{D}_i$.
In addition, the user's vote will burn/destroy a certain percentage. For example, assuming that for the cycle $i$, the NAT on the network is reduced due to voting is $\mathcal{M}_i$; then the total NAT circulation in the system is:
\begin{align}
\sum_{i=1}^{\infty} (\mathcal{A}_i + \mathcal{V}_i + \mathcal{D}_i - \mathcal{M}_i)
\end{align}

To help with understanding this section, all symbols used in this section and their corresponding explanations are listed below:
\begin{itemize}
\item $\mathcal{C}_i$: The sum of the Nebulas indices for the system in the period $i$;
\item $c_{i,j}$: User $j \in \mathcal{U}$ in the cycle $i$ Nebulas Rank Score;
\item $d_{i,j}$: User $j \in \mathcal{U}$ The total amount of NAS pledged in the period $i$;
\item $v_{i,j}$: User $j \in \mathcal{U}$ The total amount of NAT voted in the period $i$.
\end{itemize}

\subsection{Airdrop portion}
The airdrop portion is related to the user's Nebulas Rank score, specifically:
\begin{align}
    f(x) = g(x)\lambda^i
\end{align}
\noindent where $x$ is the Nebulas Rank score and can be a user's Nebulas Rank; $g(x)$ is a proportional function that adjusts the relationship between the total NAT and the total Nebulas Rank, and satisfies $g(0) = 0$ ;$\lambda$ is the airdrop attenuation factor, and $\lambda < 1$.
Since $\lambda < 1$, it is easy to know $\lim_{i\to \infty}f(x) = 0$.

It can be seen that the total amount of the airdrop portion in cycle $i$ is:
\begin{align}
\mathcal{A}_i = \sum_{i=1}^{\infty}f(\mathcal{C}_i).
\end{align}

\subsection{Voting incentives portion}
The voting incentives are related to the user's voting behavior and their Nebulas Rank. For user $j \in \mathcal{U}$, the voting incentives are:
\begin{align}
\mu f(x_{i,j}) \min\{\frac{v_{i,j}}{f(x_{i-1,j})},1\}
\end{align}
\noindent where $\mu$ is the voting incentive coefficient, $\mu > 1$, which means that the user's voting behavior is given an additional reward which can be adjusted according to the number of NAS circulating in the system.

\subsection{Pledge NAS portion}
The pledge portion of NAT distribution should be less than the airdrop portion obtained based on the users improved Nebulas Rank. Based on the nature of Nebulas Rank, given the users NAS, there is an upper limit of their Nebulas Rank  score $h(d_{i,j})$~\cite{ImproveNR},
Then the NAT obtained by the pledge part is:
\begin{align}
\mathcal{D}_i = \sum_{i=1}^{\infty}\alpha f(h(d_{i,j}))
\end{align}
\noindent where $\alpha$ is the pledge incentive coefficient.


\subsection{Destroyed/Burned NAT Portion}
\label{burn}
Each time a user votes, a portion of their NAT is destroyed while the rest is returned to the user. In addition, the Nebulas Council charges a fee of $\theta\%$ for each vote in order to pay for the necessary expenses of maintaining the voting services. Therefore, for each user, the destruction rate is:
\begin{align}
(1-\theta\%) \times \beta^i \times v_{i,j}
\end{align}
\noindent where $\beta$ is the destruction factor and $\beta < 1$. therefore,
\begin{align}
    \mathcal{M}_i = \sum_{i=1}^{\infty} (1-\theta\%) \times \beta^i \times v_{i,j} .
\end{align}

\subsection{Analysis}

note:
\begin{itemize}
\item The current version tentatively agrees that there is no difference between a vote and a negative vote, that is, the return ratio is different. It can then be set according to the ticket type and multiplied by a different return parameter $\mu_1$;
\item If you consider the change in the total nebula index of the system after the vote is completed, you can multiply a factor of $\mu_2$ to reflect the boom of the system.
\end{itemize}


\begin{roperty}
The algorithm satisfies the convergence of the total amount of NAT; in return, the total amount of NAT does not exceed the upper limit supply at any time.
\end{property}
\begin{proof}
	According to the details within the Nebulas Technical White Paper, the fixed total amount of NAS is $10^9$ with an average weekly issuance amount (on the basis of a fixed total) of $0.2\%$; in return, the total amount of NAS existing on the market for the $n$ cycle will not exceed $10^9 (1+0.002n) $
	
	Next, we must prove that the median value of assets in one cycle of all addresses (as defined in the Nebulas Rank Yellow Paper) does not exceed the total amount of existing NAS on the market. This is because for any NAS asset with a quantity of $y$, the user can only have more than half of the period (three and a half days) in one address, so it can provide the total asset value of the entire network node. Contribution of $y$.
	
	Also according to the Nebula Rank Yellow Paper, the Nebulas Rank value of any single address can not not exceed the median asset value of that address (for the same period; note that Nebulas Rank and NAT calculations are weekly and synchronized). because theNebula Rank Yellow Paper formula $Omega (CDOT) Psi(Cdot) $, the Wilbur function $Omega (CDOT), which is entered in the asset value, satisfies $Omega (x) leq x$, and the Access function $Psi (CDOT) $ value does not exceed 1.
	
	Combined with the above conclusions, in the $n$ cycle, the sum of all Nebulas Rank addresses does not exceed $10^9(1+0.002n)$, so that the NAT airdrop portion does not exceed $g (10^9(1+0.002n)) )\lambda^n$.
	
	Also, since the NAT of the voting incentive portion does not exceed the additional portion multiplied by $\mu$, even if the increment caused by the return part is added, the total increment of NAT in the period $n$ exceeds $\mu g(10^9( 1+0.002n))\lambda^n$. In addition, the increase in the pledge portion does not exceed the total amount of NAS $g (10^9(1+0.002n))\lambda^n$.
	
	Finally, to prove the convergence of the total amount of NAT; because of the airdrop portion, the pledge portion and the incentive portion are exponentially decayed with time, it is only necessary to prove the series:
	\begin{align}
	\sum_{n=1}^{\infty} \mu g(10^9(1+0.002n))\lambda^n
	\end{align}
	Convergence, since $g(\cdot)$ is a linear function,
	\begin{align}
	\lim_{n\rightarrow \infty} \frac{\mu g(10^9(1+0.002(n+1)))\lambda^{n+1}}{\mu g(10^9(1+ 0.002n))\lambda^n} = \lambda <1
	\end{align}
	The comparison of the series can be obtained by the comparison method.
\end{proof}

The series can be convergent and verified by the comparison method.
\end{proof}
At the same time, the above voting algorithm has the following positive properties.
\begin{enumerate}
	\item \textbf{Anti-snowball effect:} If you simply return NAT at a fixed ratio, a user can utilize all their NAT and enjoy a return greater than 1 (such as 1.1); then the total NAT will be $1.1^ The n$ has risen and the growth is too large.
	\item \textbf{Anti-buying:} If a user with a low Nebulas Rank obtains a large quantity of NAT and uses it for voting, because of the corresponding $x_{i-1}^j$ for addresses with a low Nebulas Rank score, there are very few NAT tokens returned resulting in most of them being burned. This causes the user's remaining NAT to be penalized.
	\item \textbf{Anti-inflation:} The depreciation of NAT can be effectively controlled because the distribution of additional NAT is related to the total amount of NAT in the current market.
	\item \textbf{Head-effect:} Users with a High Nebulas Rank during the early stages can have a higher total NAT quantity.
\end{enumerate}
